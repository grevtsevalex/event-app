import{E as g,I as c}from"./image-api-624915bf.js";import{E as u}from"./event-description-api-3febd733.js";import{_ as p,d as m,o,q as d,L as n,s as e,E as i,z as h,B as _}from"./app-2fe0b659.js";/* empty css            */const s={NOT_LOADED:0,LOADING:1,SUCCESS_LOADED:2,ERROR_LOADED:3,ERROR:4};const v=m({data(){return{event:null,imageUrl:"",loading:s.NOT_LOADED,description:""}},mounted(){this.loading=s.LOADING,new g().getEvent(Number(this.eventId)).then(t=>{t.success||(this.loading=s.ERROR_LOADED),this.event=t.data,this.loading=s.SUCCESS_LOADED}).catch(()=>this.loading=s.ERROR)},computed:{eventId(){return location.href.split("/").pop()},isAuthenticated(){return this.$store.getters.getIsAuthenticated},isMyEvent(){return this.isAuthenticated&&this.event.author_id===this.userId},userId(){return Number(this.$store.getters.getUserId||localStorage.getItem("userId"))}},methods:{loadDescription(){this.event.description_id&&new u().getDescription(this.event.description_id).then(t=>{this.description=t.data.description})},loadImage(){this.event.image_id&&new c().getImage(this.event.image_id).then(t=>{t&&(this.imageUrl=t.url)})},editButtonClickHandler(){this.goToEditPage()},goToEditPage(){this.$router.push(`/edit-event/${this.event.id}`)}},watch:{loading(t){t===s.SUCCESS_LOADED&&(this.loadDescription(),this.loadImage())}}}),a=t=>(h("data-v-643d601d"),t=t(),_(),t),y={key:0,class:"event-card bg-white"},E={class:"mx-auto grid max-w-2xl grid-cols-1 items-center gap-x-8 gap-y-16 px-4 py-24 sm:px-6 sm:py-32 lg:max-w-7xl lg:grid-cols-2 lg:px-8"},f={class:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl"},b={class:"mt-4 text-gray-500"},D={class:"mt-16 grid grid-cols-1 gap-x-6 gap-y-10 sm:grid-cols-2 sm:gap-y-16 lg:gap-x-8"},I={class:"border-t border-gray-200 pt-4"},x=a(()=>e("dt",{class:"font-medium text-gray-900"},"Дата события:",-1)),A={class:"mt-2 text-sm text-gray-500"},O={class:"border-t border-gray-200 pt-4"},S=a(()=>e("dt",{class:"font-medium text-gray-900"},"Адрес:",-1)),C={class:"mt-2 text-sm text-gray-500"},R={key:0,class:"grid grid-cols-2 grid-rows-2 gap-4 sm:gap-6 lg:gap-8"},w=["src"],L=["src"],U=["src"],k=["src"];function N(t,r,$,B,T,H){return t.event?(o(),d("div",y,[t.isMyEvent?(o(),d("button",{key:0,type:"button",onClick:r[0]||(r[0]=(...l)=>t.editButtonClickHandler&&t.editButtonClickHandler(...l)),class:"edit-button rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"Редактировать")):n("",!0),e("div",E,[e("div",null,[e("h2",f,i(t.event.title),1),e("p",b,i(t.description),1),e("dl",D,[e("div",I,[x,e("dd",A,i(t.event.date_time),1)]),e("div",O,[S,e("dd",C,i(t.event.address),1)])])]),t.imageUrl?(o(),d("div",R,[e("img",{src:t.imageUrl,alt:"Картинка мероприятия",class:"rounded-lg bg-gray-100"},null,8,w),e("img",{src:t.imageUrl,alt:"Картинка мероприятия",class:"rounded-lg bg-gray-100"},null,8,L),e("img",{src:t.imageUrl,alt:"Картинка мероприятия",class:"rounded-lg bg-gray-100"},null,8,U),e("img",{src:t.imageUrl,alt:"Картинка мероприятия",class:"rounded-lg bg-gray-100"},null,8,k)])):n("",!0)])])):n("",!0)}const q=p(v,[["render",N],["__scopeId","data-v-643d601d"]]);export{q as default};
