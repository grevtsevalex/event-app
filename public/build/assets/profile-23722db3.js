import{A as K}from"./auth-api-afac7f7e.js";import{a as y,b as m,p as N,d as k,t as $,e as A,f as G,u as z,H as _,i as j,M,g as R,w as q,h as C,j as J,K as Y,k as Q,T as W,F as X,l as T,m as Z,_ as ee,o as te,n as le,q as a,s as p,v as g,x as ae,y as oe,z as se}from"./app-3e3e34be.js";import{F as I}from"./FetchHelper-952a71bc.js";/* empty css            */function ne(e){var t,r;let o=(t=e==null?void 0:e.form)!=null?t:e.closest("form");if(o){for(let s of o.elements)if(s!==e&&(s.tagName==="INPUT"&&s.type==="submit"||s.tagName==="BUTTON"&&s.type==="submit"||s.nodeName==="INPUT"&&s.type==="image")){s.click();return}(r=o.requestSubmit)==null||r.call(o)}}function re(e,t,r){let o=y(r==null?void 0:r.value),s=m(()=>e.value!==void 0);return[m(()=>s.value?e.value:o.value),function(i){return s.value||(o.value=i),t==null?void 0:t(i)}]}let H=Symbol("LabelContext");function L(){let e=j(H,null);if(e===null){let t=new Error("You used a <Label /> component, but it is not inside a parent.");throw Error.captureStackTrace&&Error.captureStackTrace(t,L),t}return e}function ie({slot:e={},name:t="Label",props:r={}}={}){let o=y([]);function s(i){return o.value.push(i),()=>{let l=o.value.indexOf(i);l!==-1&&o.value.splice(l,1)}}return N(H,{register:s,slot:e,name:t,props:r}),m(()=>o.value.length>0?o.value.join(" "):void 0)}let de=k({name:"Label",props:{as:{type:[Object,String],default:"label"},passive:{type:[Boolean],default:!1},id:{type:String,default:()=>`headlessui-label-${$()}`}},setup(e,{slots:t,attrs:r}){let o=L();return A(()=>G(o.register(e.id))),()=>{let{name:s="Label",slot:i={},props:l={}}=o,{id:f,passive:h,...v}=e,d={...Object.entries(l).reduce((x,[w,S])=>Object.assign(x,{[w]:z(S)}),{}),id:f};return h&&(delete d.onClick,delete d.htmlFor,delete v.onClick),_({ourProps:d,theirProps:v,slot:i,attrs:r,slots:t,name:s})}}}),O=Symbol("GroupContext"),ue=k({name:"SwitchGroup",props:{as:{type:[Object,String],default:"template"}},setup(e,{slots:t,attrs:r}){let o=y(null),s=ie({name:"SwitchLabel",props:{htmlFor:m(()=>{var l;return(l=o.value)==null?void 0:l.id}),onClick(l){o.value&&(l.currentTarget.tagName==="LABEL"&&l.preventDefault(),o.value.click(),o.value.focus({preventScroll:!0}))}}}),i=M({name:"SwitchDescription"});return N(O,{switchRef:o,labelledby:s,describedby:i}),()=>_({theirProps:e,ourProps:{},slot:{},slots:t,attrs:r,name:"SwitchGroup"})}}),me=k({name:"Switch",emits:{"update:modelValue":e=>!0},props:{as:{type:[Object,String],default:"button"},modelValue:{type:Boolean,default:void 0},defaultChecked:{type:Boolean,optional:!0},form:{type:String,optional:!0},name:{type:String,optional:!0},value:{type:String,optional:!0},id:{type:String,default:()=>`headlessui-switch-${$()}`}},inheritAttrs:!1,setup(e,{emit:t,attrs:r,slots:o,expose:s}){let i=j(O,null),[l,f]=re(m(()=>e.modelValue),n=>t("update:modelValue",n),m(()=>e.defaultChecked));function h(){f(!l.value)}let v=y(null),d=i===null?v:i.switchRef,x=R(m(()=>({as:e.as,type:r.type})),d);s({el:d,$el:d});function w(n){n.preventDefault(),h()}function S(n){n.key===T.Space?(n.preventDefault(),h()):n.key===T.Enter&&ne(n.currentTarget)}function P(n){n.preventDefault()}let b=m(()=>{var n,u;return(u=(n=Z(d))==null?void 0:n.closest)==null?void 0:u.call(n,"form")});return A(()=>{q([b],()=>{if(!b.value||e.defaultChecked===void 0)return;function n(){f(e.defaultChecked)}return b.value.addEventListener("reset",n),()=>{var u;(u=b.value)==null||u.removeEventListener("reset",n)}},{immediate:!0})}),()=>{let{id:n,name:u,value:E,form:V,...B}=e,D={checked:l.value},F={id:n,ref:d,role:"switch",type:x.value,tabIndex:0,"aria-checked":l.value,"aria-labelledby":i==null?void 0:i.labelledby.value,"aria-describedby":i==null?void 0:i.describedby.value,onClick:w,onKeyup:S,onKeypress:P};return C(X,[u!=null&&l.value!=null?C(J,Y({features:Q.Hidden,as:"input",type:"checkbox",hidden:!0,readOnly:!0,checked:l.value,form:V,name:u,value:E})):null,_({ourProps:F,theirProps:{...r,...W(B,["modelValue","defaultChecked"])},slot:D,attrs:r,slots:o,name:"Switch"})])}}}),ce=de;class U{checkToken(){return localStorage.getItem("ifh_duf1k")!==null}getAuthHeader(){return{Authorization:`Bearer ${localStorage.getItem("ifh_duf1k")}`}}getUser(){return this.checkToken()===!1?Promise.reject():I.sendGet("/api/user",this.getAuthHeader())}updateUser(t){return this.checkToken()===!1?Promise.reject():I.sendPatch("/api/user",JSON.stringify(t),this.getAuthHeader())}}const pe=k({components:{ChevronDownIcon:ae,Switch:me,SwitchGroup:ue,SwitchLabel:ce},data(){return{userId:"",name:"",lastName:"",phone:"",telegram:"",email:""}},created(){new U().getUser().then(e=>{this.userId=e.id,this.name=e.name,this.lastName=e.last_name,this.phone=e.phone,this.telegram=e.telegram,this.email=e.email})},computed:{dataToSave(){const e={id:this.userId,name:this.name,last_name:this.lastName,phone:this.phone,telegram:this.telegram,email:this.email},r=Object.entries(e).filter(([o,s])=>!!s);return Object.fromEntries(r)}},methods:{clickHandler(){new K().logout().then(()=>{this.$store.commit("setIsAuthenticated",!1),localStorage.removeItem("userId"),localStorage.removeItem("ifh_duf1k"),window.location="/"})},saveUserClickHandler(){new U().updateUser(this.dataToSave)}}}),c=e=>(oe("data-v-745ec7e8"),e=e(),se(),e),ge={class:"isolate bg-white px-6 py-24 sm:py-32 lg:px-8"},fe=c(()=>a("div",{class:"mx-auto max-w-2xl text-center"},[a("h2",{class:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl"},"Мой профиль")],-1)),he={action:"#",method:"POST",class:"mx-auto mt-16 max-w-xl sm:mt-20"},ve={class:"grid grid-cols-1 gap-x-8 gap-y-6 sm:grid-cols-2"},be=c(()=>a("label",{for:"first-name",class:"block text-sm font-semibold leading-6 text-gray-900"},"Имя",-1)),ye={class:"mt-2.5"},ke=c(()=>a("label",{for:"last-name",class:"block text-sm font-semibold leading-6 text-gray-900"},"Фамилия",-1)),xe={class:"mt-2.5"},we={class:"sm:col-span-2"},Se=c(()=>a("label",{for:"email",class:"block text-sm font-semibold leading-6 text-gray-900"},"Email",-1)),_e={class:"mt-2.5"},Ce={class:"sm:col-span-2"},Te=c(()=>a("label",{for:"phone-number",class:"block text-sm font-semibold leading-6 text-gray-900"},"Телефон",-1)),Ie={class:"relative mt-2.5"},Ue={class:"sm:col-span-2"},Ne=c(()=>a("label",{for:"telegram",class:"block text-sm font-semibold leading-6 text-gray-900"},"Телеграм логин",-1)),$e={class:"relative mt-2.5"},Ae={class:"mt-10 buttons"};function je(e,t,r,o,s,i){return te(),le("div",ge,[fe,a("form",he,[a("div",ve,[a("div",null,[be,a("div",ye,[p(a("input",{type:"text","onUpdate:modelValue":t[0]||(t[0]=l=>e.name=l),name:"first-name",id:"first-name",autocomplete:"given-name",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[g,e.name]])])]),a("div",null,[ke,a("div",xe,[p(a("input",{type:"text","onUpdate:modelValue":t[1]||(t[1]=l=>e.lastName=l),name:"last-name",id:"last-name",autocomplete:"family-name",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[g,e.lastName]])])]),a("div",we,[Se,a("div",_e,[p(a("input",{"onUpdate:modelValue":t[2]||(t[2]=l=>e.email=l),type:"email",name:"email",id:"email",autocomplete:"email",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[g,e.email]])])]),a("div",Ce,[Te,a("div",Ie,[p(a("input",{type:"tel","onUpdate:modelValue":t[3]||(t[3]=l=>e.phone=l),name:"phone-number",id:"phone-number",autocomplete:"tel",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[g,e.phone]])])]),a("div",Ue,[Ne,a("div",$e,[p(a("input",{type:"text","onUpdate:modelValue":t[4]||(t[4]=l=>e.telegram=l),name:"telegram",id:"telegram",placeholder:"tglogin",autocomplete:"tel",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[g,e.telegram]])])])]),a("div",Ae,[a("button",{type:"button",onClick:t[5]||(t[5]=(...l)=>e.saveUserClickHandler&&e.saveUserClickHandler(...l)),class:"block w-full rounded-md bg-indigo-600 px-3.5 py-2.5 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},"Сохранить"),a("button",{type:"button",onClick:t[6]||(t[6]=(...l)=>e.clickHandler&&e.clickHandler(...l)),class:"exit-button py-2.5 px-3.5 me-2 mb-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"},"Выйти")])])])}const Ee=ee(pe,[["render",je],["__scopeId","data-v-745ec7e8"]]);export{Ee as default};
