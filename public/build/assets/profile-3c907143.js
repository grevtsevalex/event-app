import{F as A,_ as E,a as y,b as S,e as I,f as j,o as _,g as w,h as l,w as k,v as b,A as H,p as V,i as N}from"./app-19969aa0.js";/* empty css            */class U{checkToken(){return localStorage.getItem("ifh_duf1k")!==null}getAuthHeader(){return{Authorization:`Bearer ${localStorage.getItem("ifh_duf1k")}`}}getUser(){return this.checkToken()===!1?Promise.reject():A.sendGet("/api/user",this.getAuthHeader())}updateUser(d){return this.checkToken()===!1?Promise.reject():A.sendPatch("/api/user",JSON.stringify(d),this.getAuthHeader())}}var O=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},T={exports:{}};(function(v,d){(function(c,t){v.exports=t()})(O,function(){return function(c){function t(a){if(e[a])return e[a].exports;var r=e[a]={i:a,l:!1,exports:{}};return c[a].call(r.exports,r,r.exports,t),r.l=!0,r.exports}var e={};return t.m=c,t.c=e,t.i=function(a){return a},t.d=function(a,r,o){t.o(a,r)||Object.defineProperty(a,r,{configurable:!1,enumerable:!0,get:o})},t.n=function(a){var r=a&&a.__esModule?function(){return a.default}:function(){return a};return t.d(r,"a",r),r},t.o=function(a,r){return Object.prototype.hasOwnProperty.call(a,r)},t.p=".",t(t.s=10)}([function(c,t){c.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleLowerCase()}},"!":{escape:!0}}},function(c,t,e){function a(n){var s=document.createEvent("Event");return s.initEvent(n,!0,!0),s}var r=e(2),o=e(0),m=e.n(o);t.a=function(n,s){var u=s.value;if((Array.isArray(u)||typeof u=="string")&&(u={mask:u,tokens:m.a}),n.tagName.toLocaleUpperCase()!=="INPUT"){var f=n.getElementsByTagName("input");if(f.length!==1)throw new Error("v-mask directive requires 1 input, found "+f.length);n=f[0]}n.oninput=function(g){if(g.isTrusted){var p=n.selectionEnd,h=n.value[p-1];for(n.value=e.i(r.a)(n.value,u.mask,!0,u.tokens);p<n.value.length&&n.value.charAt(p-1)!==h;)p++;n===document.activeElement&&(n.setSelectionRange(p,p),setTimeout(function(){n.setSelectionRange(p,p)},0)),n.dispatchEvent(a("input"))}};var i=e.i(r.a)(n.value,u.mask,!0,u.tokens);i!==n.value&&(n.value=i,n.dispatchEvent(a("input")))}},function(c,t,e){var a=e(6),r=e(5);t.a=function(o,m){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],s=arguments[3];return Array.isArray(m)?e.i(r.a)(a.a,m,s)(o,m,n,s):e.i(a.a)(o,m,n,s)}},function(c,t,e){function a(f){f.component(s.a.name,s.a),f.directive("mask",m.a)}Object.defineProperty(t,"__esModule",{value:!0});var r=e(0),o=e.n(r),m=e(1),n=e(7),s=e.n(n);e.d(t,"TheMask",function(){return s.a}),e.d(t,"mask",function(){return m.a}),e.d(t,"tokens",function(){return o.a}),e.d(t,"version",function(){return u});var u="0.11.1";t.default=a,typeof window<"u"&&window.Vue&&window.Vue.use(a)},function(c,t,e){Object.defineProperty(t,"__esModule",{value:!0});var a=e(1),r=e(0),o=e.n(r),m=e(2);t.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return o.a}}},directives:{mask:a.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(n){n!==this.lastValue&&(this.display=n)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(n){n.isTrusted||this.refresh(n.target.value)},refresh:function(s){this.display=s;var s=e.i(m.a)(s,this.mask,this.masked,this.tokens);s!==this.lastValue&&(this.lastValue=s,this.$emit("input",s))}}}},function(c,t,e){function a(r,o,m){return o=o.sort(function(n,s){return n.length-s.length}),function(n,s){for(var u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],f=0;f<o.length;){var i=o[f];f++;var g=o[f];if(!(g&&r(n,g,!0,m).length>i.length))return r(n,i,u,m)}return""}}t.a=a},function(c,t,e){function a(r,o){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],n=arguments[3];r=r||"",o=o||"";for(var s=0,u=0,f="";s<o.length&&u<r.length;){var i=o[s],g=n[i],p=r[u];g&&!g.escape?(g.pattern.test(p)&&(f+=g.transform?g.transform(p):p,s++),u++):(g&&g.escape&&(s++,i=o[s]),m&&(f+=i),p===i&&u++,s++)}for(var h="";s<o.length&&m;){var i=o[s];if(n[i]){h="";break}h+=i,s++}return f+h}t.a=a},function(c,t,e){var a=e(8)(e(4),e(9),null,null);c.exports=a.exports},function(c,t){c.exports=function(e,a,r,o){var m,n=e=e||{},s=typeof e.default;s!=="object"&&s!=="function"||(m=e,n=e.default);var u=typeof n=="function"?n.options:n;if(a&&(u.render=a.render,u.staticRenderFns=a.staticRenderFns),r&&(u._scopeId=r),o){var f=u.computed||(u.computed={});Object.keys(o).forEach(function(i){var g=o[i];f[i]=function(){return g}})}return{esModule:m,exports:n,options:u}}},function(c,t){c.exports={render:function(){var e=this,a=e.$createElement;return(e._self._c||a)("input",{directives:[{name:"mask",rawName:"v-mask",value:e.config,expression:"config"}],attrs:{type:"text"},domProps:{value:e.display},on:{input:e.onInput}})},staticRenderFns:[]}},function(c,t,e){c.exports=e(3)}])})})(T);var P=T.exports;const M={directives:{mask:P.mask},setup(){const v=y(""),d=y(""),c=y(""),t=y(""),e=y(""),a=y(""),r=y(!1);S(async()=>{const i=await new U().getUser();v.value=i.id,d.value=i.name,c.value=i.last_name,t.value=i.phone,e.value=i.telegram,a.value=i.email});const m=i=>i.replace(/\D/g,""),n=i=>i.replace("@",""),s=I(()=>{const i={id:v.value,name:d.value,last_name:c.value,phone:m(t.value),telegram:n(e.value),email:a.value},g=Object.entries(i).filter(([p,h])=>!!h);return Object.fromEntries(g)});return{userId:v,name:d,lastName:c,phone:t,telegram:e,email:a,clickHandler:()=>{new H().logout().then(()=>{localStorage.removeItem("userId"),localStorage.removeItem("ifh_duf1k"),window.location="/"})},saveUserClickHandler:async()=>{r.value=!0,await new U().updateUser(s.value),r.value=!1},isLoading:r}}},x=v=>(V("data-v-f01c80ce"),v=v(),N(),v),C={class:"isolate bg-white px-6 py-24 sm:py-32 lg:px-8"},L=x(()=>l("div",{class:"mx-auto max-w-2xl text-center"},[l("h2",{class:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl"},"Мой профиль")],-1)),B={action:"#",method:"POST",class:"mx-auto mt-16 max-w-xl sm:mt-20"},z={class:"grid grid-cols-1 gap-x-8 gap-y-6 sm:grid-cols-2"},F=x(()=>l("label",{for:"first-name",class:"block text-sm font-semibold leading-6 text-gray-900"},"Имя",-1)),R={class:"mt-2.5"},Z=x(()=>l("label",{for:"last-name",class:"block text-sm font-semibold leading-6 text-gray-900"},"Фамилия",-1)),D={class:"mt-2.5"},q={class:"sm:col-span-2"},G=x(()=>l("label",{for:"email",class:"block text-sm font-semibold leading-6 text-gray-900"},"Email",-1)),J={class:"mt-2.5"},X={class:"sm:col-span-2"},K=x(()=>l("label",{for:"phone-number",class:"block text-sm font-semibold leading-6 text-gray-900"},"Телефон",-1)),Q={class:"relative mt-2.5"},W={class:"sm:col-span-2"},Y=x(()=>l("label",{for:"telegram",class:"block text-sm font-semibold leading-6 text-gray-900"},"Телеграм логин",-1)),$={class:"relative mt-2.5"},ee={class:"mt-10 buttons"},te=["disabled"],ne={key:0,class:"loader"},ae={key:1};function oe(v,d,c,t,e,a){const r=j("mask");return _(),w("div",C,[L,l("form",B,[l("div",z,[l("div",null,[F,l("div",R,[k(l("input",{type:"text","onUpdate:modelValue":d[0]||(d[0]=o=>t.name=o),name:"first-name",id:"first-name",autocomplete:"given-name",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[b,t.name]])])]),l("div",null,[Z,l("div",D,[k(l("input",{type:"text","onUpdate:modelValue":d[1]||(d[1]=o=>t.lastName=o),name:"last-name",id:"last-name",autocomplete:"family-name",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[b,t.lastName]])])]),l("div",q,[G,l("div",J,[k(l("input",{"onUpdate:modelValue":d[2]||(d[2]=o=>t.email=o),type:"email",name:"email",id:"email",autocomplete:"email",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[b,t.email]])])]),l("div",X,[K,l("div",Q,[k(l("input",{"onUpdate:modelValue":d[3]||(d[3]=o=>t.phone=o),type:"tel",name:"phone-number",id:"phone-number",autocomplete:"tel",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[r,"+7 (###) ### - ## - ##"],[b,t.phone]])])]),l("div",W,[Y,l("div",$,[k(l("input",{type:"text","onUpdate:modelValue":d[4]||(d[4]=o=>t.telegram=o),name:"telegram",id:"telegram",placeholder:"@login",autocomplete:"tel",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[b,t.telegram]])])])]),l("div",ee,[l("button",{type:"button",onClick:d[5]||(d[5]=(...o)=>t.saveUserClickHandler&&t.saveUserClickHandler(...o)),disabled:t.isLoading,class:"save-button relative block w-full rounded-md bg-indigo-600 px-3.5 py-2.5 text-center text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},[t.isLoading?(_(),w("span",ne)):(_(),w("span",ae,"Сохранить"))],8,te),l("button",{type:"button",onClick:d[6]||(d[6]=(...o)=>t.clickHandler&&t.clickHandler(...o)),class:"exit-button py-2.5 px-3.5 me-2 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:z-10 focus:ring-4 focus:ring-gray-200 dark:focus:ring-gray-700 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:text-white dark:hover:bg-gray-700"},"Выйти")])])])}const ie=E(M,[["render",oe],["__scopeId","data-v-f01c80ce"]]);export{ie as default};
