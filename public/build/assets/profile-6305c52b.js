import{F as A,_ as E,a as h,b as I,e as S,f as j,o as _,g as w,h as l,w as y,v as b,A as H,p as V,i as N}from"./app-357c4cd6.js";/* empty css            */class U{checkToken(){return localStorage.getItem("ifh_duf1k")!==null}getAuthHeader(){return{Authorization:`Bearer ${localStorage.getItem("ifh_duf1k")}`}}getUser(){return this.checkToken()===!1?Promise.reject():A.sendGet("/api/user",this.getAuthHeader())}updateUser(c){return this.checkToken()===!1?Promise.reject():A.sendPatch("/api/user",JSON.stringify(c),this.getAuthHeader())}}var M=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},T={exports:{}};(function(v,c){(function(d,t){v.exports=t()})(M,function(){return function(d){function t(a){if(e[a])return e[a].exports;var o=e[a]={i:a,l:!1,exports:{}};return d[a].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var e={};return t.m=d,t.c=e,t.i=function(a){return a},t.d=function(a,o,s){t.o(a,o)||Object.defineProperty(a,o,{configurable:!1,enumerable:!0,get:s})},t.n=function(a){var o=a&&a.__esModule?function(){return a.default}:function(){return a};return t.d(o,"a",o),o},t.o=function(a,o){return Object.prototype.hasOwnProperty.call(a,o)},t.p=".",t(t.s=10)}([function(d,t){d.exports={"#":{pattern:/\d/},X:{pattern:/[0-9a-zA-Z]/},S:{pattern:/[a-zA-Z]/},A:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleUpperCase()}},a:{pattern:/[a-zA-Z]/,transform:function(e){return e.toLocaleLowerCase()}},"!":{escape:!0}}},function(d,t,e){function a(n){var r=document.createEvent("Event");return r.initEvent(n,!0,!0),r}var o=e(2),s=e(0),m=e.n(s);t.a=function(n,r){var u=r.value;if((Array.isArray(u)||typeof u=="string")&&(u={mask:u,tokens:m.a}),n.tagName.toLocaleUpperCase()!=="INPUT"){var f=n.getElementsByTagName("input");if(f.length!==1)throw new Error("v-mask directive requires 1 input, found "+f.length);n=f[0]}n.oninput=function(g){if(g.isTrusted){var p=n.selectionEnd,k=n.value[p-1];for(n.value=e.i(o.a)(n.value,u.mask,!0,u.tokens);p<n.value.length&&n.value.charAt(p-1)!==k;)p++;n===document.activeElement&&(n.setSelectionRange(p,p),setTimeout(function(){n.setSelectionRange(p,p)},0)),n.dispatchEvent(a("input"))}};var i=e.i(o.a)(n.value,u.mask,!0,u.tokens);i!==n.value&&(n.value=i,n.dispatchEvent(a("input")))}},function(d,t,e){var a=e(6),o=e(5);t.a=function(s,m){var n=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],r=arguments[3];return Array.isArray(m)?e.i(o.a)(a.a,m,r)(s,m,n,r):e.i(a.a)(s,m,n,r)}},function(d,t,e){function a(f){f.component(r.a.name,r.a),f.directive("mask",m.a)}Object.defineProperty(t,"__esModule",{value:!0});var o=e(0),s=e.n(o),m=e(1),n=e(7),r=e.n(n);e.d(t,"TheMask",function(){return r.a}),e.d(t,"mask",function(){return m.a}),e.d(t,"tokens",function(){return s.a}),e.d(t,"version",function(){return u});var u="0.11.1";t.default=a,typeof window<"u"&&window.Vue&&window.Vue.use(a)},function(d,t,e){Object.defineProperty(t,"__esModule",{value:!0});var a=e(1),o=e(0),s=e.n(o),m=e(2);t.default={name:"TheMask",props:{value:[String,Number],mask:{type:[String,Array],required:!0},masked:{type:Boolean,default:!1},tokens:{type:Object,default:function(){return s.a}}},directives:{mask:a.a},data:function(){return{lastValue:null,display:this.value}},watch:{value:function(n){n!==this.lastValue&&(this.display=n)},masked:function(){this.refresh(this.display)}},computed:{config:function(){return{mask:this.mask,tokens:this.tokens,masked:this.masked}}},methods:{onInput:function(n){n.isTrusted||this.refresh(n.target.value)},refresh:function(r){this.display=r;var r=e.i(m.a)(r,this.mask,this.masked,this.tokens);r!==this.lastValue&&(this.lastValue=r,this.$emit("input",r))}}}},function(d,t,e){function a(o,s,m){return s=s.sort(function(n,r){return n.length-r.length}),function(n,r){for(var u=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],f=0;f<s.length;){var i=s[f];f++;var g=s[f];if(!(g&&o(n,g,!0,m).length>i.length))return o(n,i,u,m)}return""}}t.a=a},function(d,t,e){function a(o,s){var m=!(arguments.length>2&&arguments[2]!==void 0)||arguments[2],n=arguments[3];o=o||"",s=s||"";for(var r=0,u=0,f="";r<s.length&&u<o.length;){var i=s[r],g=n[i],p=o[u];g&&!g.escape?(g.pattern.test(p)&&(f+=g.transform?g.transform(p):p,r++),u++):(g&&g.escape&&(r++,i=s[r]),m&&(f+=i),p===i&&u++,r++)}for(var k="";r<s.length&&m;){var i=s[r];if(n[i]){k="";break}k+=i,r++}return f+k}t.a=a},function(d,t,e){var a=e(8)(e(4),e(9),null,null);d.exports=a.exports},function(d,t){d.exports=function(e,a,o,s){var m,n=e=e||{},r=typeof e.default;r!=="object"&&r!=="function"||(m=e,n=e.default);var u=typeof n=="function"?n.options:n;if(a&&(u.render=a.render,u.staticRenderFns=a.staticRenderFns),o&&(u._scopeId=o),s){var f=u.computed||(u.computed={});Object.keys(s).forEach(function(i){var g=s[i];f[i]=function(){return g}})}return{esModule:m,exports:n,options:u}}},function(d,t){d.exports={render:function(){var e=this,a=e.$createElement;return(e._self._c||a)("input",{directives:[{name:"mask",rawName:"v-mask",value:e.config,expression:"config"}],attrs:{type:"text"},domProps:{value:e.display},on:{input:e.onInput}})},staticRenderFns:[]}},function(d,t,e){d.exports=e(3)}])})})(T);var O=T.exports;const P={directives:{mask:O.mask},setup(){const v=h(""),c=h(""),d=h(""),t=h(""),e=h(""),a=h(""),o=h(!1);I(async()=>{const i=await new U().getUser();v.value=i.id,c.value=i.name,d.value=i.last_name,t.value=i.phone,e.value=i.telegram,a.value=i.email});const m=i=>i.replace(/\D/g,""),n=i=>i.replace("@",""),r=S(()=>{const i={id:v.value,name:c.value,last_name:d.value,phone:m(t.value),telegram:n(e.value),email:a.value};return Object.fromEntries(Object.entries(i).filter(([g,p])=>!!p))});return{userId:v,name:c,lastName:d,phone:t,telegram:e,email:a,clickHandler:()=>{new H().logout().then(()=>{localStorage.removeItem("userId"),localStorage.removeItem("ifh_duf1k"),window.location="/"})},saveUserClickHandler:async()=>{o.value=!0,await new U().updateUser(r.value),o.value=!1},isLoading:o}}},x=v=>(V("data-v-dd336a66"),v=v(),N(),v),C={class:"isolate bg-white px-6 py-24 sm:py-32 lg:px-8"},L=x(()=>l("div",{class:"mx-auto max-w-2xl text-center"},[l("h2",{class:"text-3xl font-bold tracking-tight text-gray-900 sm:text-4xl"},"Мой профиль")],-1)),B={class:"mx-auto mt-16 max-w-xl sm:mt-20"},z={class:"grid grid-cols-1 gap-x-8 gap-y-6 sm:grid-cols-2"},F=x(()=>l("label",{for:"first-name",class:"block text-sm font-semibold leading-6 text-gray-900"},"Имя",-1)),R={class:"mt-2.5"},Z=x(()=>l("label",{for:"last-name",class:"block text-sm font-semibold leading-6 text-gray-900"},"Фамилия",-1)),D={class:"mt-2.5"},q={class:"sm:col-span-2"},G=x(()=>l("label",{for:"email",class:"block text-sm font-semibold leading-6 text-gray-900"},"Email",-1)),J={class:"mt-2.5"},X={class:"sm:col-span-2"},K=x(()=>l("label",{for:"phone-number",class:"block text-sm font-semibold leading-6 text-gray-900"},"Телефон",-1)),Q={class:"mt-2.5"},W={class:"sm:col-span-2"},Y=x(()=>l("label",{for:"telegram",class:"block text-sm font-semibold leading-6 text-gray-900"},"Телеграм логин",-1)),$={class:"mt-2.5"},ee={class:"mt-10 buttons flex"},te=["disabled"],ne={key:0,class:"loader"},ae={key:1};function se(v,c,d,t,e,a){const o=j("mask");return _(),w("div",C,[L,l("form",B,[l("div",z,[l("div",null,[F,l("div",R,[y(l("input",{"onUpdate:modelValue":c[0]||(c[0]=s=>t.name=s),id:"first-name",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[b,t.name]])])]),l("div",null,[Z,l("div",D,[y(l("input",{"onUpdate:modelValue":c[1]||(c[1]=s=>t.lastName=s),id:"last-name",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[b,t.lastName]])])]),l("div",q,[G,l("div",J,[y(l("input",{"onUpdate:modelValue":c[2]||(c[2]=s=>t.email=s),id:"email",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[b,t.email]])])]),l("div",X,[K,l("div",Q,[y(l("input",{"onUpdate:modelValue":c[3]||(c[3]=s=>t.phone=s),id:"phone-number",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[b,t.phone],[o,"+7 (###) ### - ## - ##"]])])]),l("div",W,[Y,l("div",$,[y(l("input",{"onUpdate:modelValue":c[4]||(c[4]=s=>t.telegram=s),id:"telegram",class:"block w-full rounded-md border-0 px-3.5 py-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-600 sm:text-sm sm:leading-6"},null,512),[[b,t.telegram]])])])]),l("div",ee,[l("button",{onClick:c[5]||(c[5]=(...s)=>t.saveUserClickHandler&&t.saveUserClickHandler(...s)),disabled:t.isLoading,class:"relative flex justify-center w-full rounded-md bg-indigo-600 px-3.5 py-2.5 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"},[t.isLoading?(_(),w("span",ne)):(_(),w("span",ae,"Сохранить"))],8,te),l("button",{onClick:c[6]||(c[6]=(...s)=>t.clickHandler&&t.clickHandler(...s)),class:"ml-4 py-2.5 px-3.5 text-sm font-medium text-gray-900 focus:outline-none bg-white rounded-lg border border-gray-200 hover:bg-gray-100 hover:text-blue-700 focus:ring-4 focus:ring-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:border-gray-600 dark:hover:bg-gray-700 dark:hover:text-white"},"Выйти")])])])}const ie=E(P,[["render",se],["__scopeId","data-v-dd336a66"]]);export{ie as default};
